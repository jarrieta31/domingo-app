{"version":3,"file":"default-src_app_services_database_service_ts.js","mappings":"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","sources":["./src/app/services/database.service.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\nimport { AngularFirestore } from \"@angular/fire/compat/firestore\";\nimport { BehaviorSubject, Observable } from \"rxjs\";\nimport { Eventos } from \"../shared/eventos\";\nimport { Departament } from \"../shared/departament\";\nimport { Subscription } from \"rxjs\";\nimport distance from \"@turf/distance\";\nimport { GeolocationService } from \"./geolocation.service\";\n\nexport declare type Units = \"meters\" | \"millimeters\" | \"centimeters\" | \"kilometers\" | \"acres\" | \"miles\" | \"nauticalmiles\" | \"inches\" | \"yards\" | \"feet\" | \"radians\" | \"degrees\" | \"hectares\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class DatabaseService {\n  today: Date = new Date();\n  /**Se van acumulando todos los lugares de los departamentos seleccionados */\n  initEvents: Eventos[] = [];\n  /** Guarda el nombre de los departamentos que ya fueron seleccionados por el usuario*/\n  save_depto: string[] = [];\n  /** guarda los datos para pantalla de casa domninga */\n  dominga: any[] = [];\n  casaDominga: BehaviorSubject<any[]>;\n\n  // Iniciamos el servicio 'AngularFireDatabase' de Angular Fire\n  constructor(\n    private afs: AngularFirestore,\n    private geolocationSvc: GeolocationService\n  ) {\n    this.eventos = new BehaviorSubject<Eventos[]>(this.distanceEvents);\n    this.casaDominga = new BehaviorSubject<Eventos[]>(this.dominga);\n  }\n\n  eventos: BehaviorSubject<Eventos[]>;\n  allEvents: Eventos[] = [];\n\n  currentPosition$: Subscription;\n  position$: Observable<any>;\n\n  selectionDepto: string | null = null;\n  selectionDistance: number | null = null;\n\n  /**Nombre del departamento seleccionado actualmente*/\n  depto: string = null;\n  /**Distancia seleccionada actualmente */\n  distance: number = null;\n\n  /**se guardan los lugares recibidos desde el filtro distancia */\n  distanceEvents: Eventos[] = [];\n\n  /**controla si la base devuelve datos */\n  noData: boolean = false;\n  /**controla que existen lugares en el rango de distancia */\n  controlDistance: boolean = false;\n\n  deptoLimit: any[] = [\n    { nameDepto: \"Artigas\", limit: [\"Artigas\", \"Salto\", \"Rivera\"] },\n    {\n      nameDepto: \"Canelones\",\n      limit: [\"Canelones\", \"Florida\", \"Lavalleja\", \"Maldonado\", \"San José\"],\n    },\n    {\n      nameDepto: \"Cerro Largo\",\n      limit: [\n        \"Cerro Largo\",\n        \"Durazno\",\n        \"Rivera\",\n        \"Tacuarembó\",\n        \"Treinta y Tres\",\n      ],\n    },\n    {\n      nameDepto: \"Colonia\",\n      limit: [\"Colonia\", \"Flores\", \"San José\", \"Soriano\"],\n    },\n    {\n      nameDepto: \"Durazno\",\n      limit: [\n        \"Durazno\",\n        \"Cerro Largo\",\n        \"Flores\",\n        \"Florida\",\n        \"Río Negro\",\n        \"Soriano\",\n        \"Tacuarembó\",\n        \"Treinta y Tres\",\n      ],\n    },\n    {\n      nameDepto: \"Flores\",\n      limit: [\n        \"Flores\",\n        \"Colonia\",\n        \"Durazno\",\n        \"Florida\",\n        \"Río Negro\",\n        \"San José\",\n        \"Soriano\",\n      ],\n    },\n    {\n      nameDepto: \"Florida\",\n      limit: [\n        \"Florida\",\n        \"Canelones\",\n        \"Durazno\",\n        \"Flores\",\n        \"Lavalleja\",\n        \"San José\",\n        \"Treinta y Tres\",\n      ],\n    },\n    {\n      nameDepto: \"Lavalleja\",\n      limit: [\n        \"Lavalleja\",\n        \"Canelones\",\n        \"Florida\",\n        \"Maldonado\",\n        \"Rocha\",\n        \"Treinta y Tres\",\n      ],\n    },\n    {\n      nameDepto: \"Maldonado\",\n      limit: [\"Maldonado\", \"Canelones\", \"Lavalleja\", \"Rocha\"],\n    },\n    { nameDepto: \"Montevideo\", limit: [\"Montevideo\", \"Canelones\", \"San José\"] },\n    {\n      nameDepto: \"Paysandú\",\n      limit: [\"Paysandú\", \"Río Negro\", \"Salto\", \"Tacuarembó\"],\n    },\n    {\n      nameDepto: \"Río Negro\",\n      limit: [\n        \"Río Negro\",\n        \"Durazno\",\n        \"Flores\",\n        \"Paysandú\",\n        \"Soriano\",\n        \"Tacuarembó\",\n      ],\n    },\n    {\n      nameDepto: \"Rivera\",\n      limit: [\"Rivera\", \"Artigas\", \"Cerro Largo\", \"Salto\", \"Tacuarembó\"],\n    },\n    {\n      nameDepto: \"Rocha\",\n      limit: [\"Rocha\", \"Maldonado\", \"Lavalleja\", \"Treinta y Tres\"],\n    },\n    {\n      nameDepto: \"Salto\",\n      limit: [\"Salto\", \"Artigas\", \"Paysandú\", \"Rivera\", \"Tacuarembó\"],\n    },\n    {\n      nameDepto: \"San José\",\n      limit: [\n        \"San José\",\n        \"Canelones\",\n        \"Colonia\",\n        \"Flores\",\n        \"Florida\",\n        \"Soriano\",\n      ],\n    },\n    {\n      nameDepto: \"Soriano\",\n      limit: [\n        \"Soriano\",\n        \"Colonia\",\n        \"Durazno\",\n        \"Flores\",\n        \"Río Negro\",\n        \"San José\",\n      ],\n    },\n    {\n      nameDepto: \"Tacuarembó\",\n      limit: [\n        \"Tacuarembó\",\n        \"Cerro Largo\",\n        \"Durazno\",\n        \"Paysandú\",\n        \"Río Negro\",\n        \"Rivera\",\n        \"Salto\",\n      ],\n    },\n    {\n      nameDepto: \"Treinta y Tres\",\n      limit: [\n        \"Treinta y Tres\",\n        \"Cerro Largo\",\n        \"Durazno\",\n        \"Florida\",\n        \"Lavalleja\",\n        \"Rocha\",\n        \"Tacuarembó\",\n      ],\n    },\n  ];\n\n  /**\n   * Departamento o distancia seleeccionado en la pantalla inicial\n   */\n  getSelectMenu(depto: string | null, distance: number | null) {\n    if (depto == null) {\n      this.selectionDistance = distance;\n      this.selectionDepto = null;\n    } else {\n      this.selectionDepto = depto;\n      this.selectionDistance = null;\n    }\n  }\n\n  /**\n   * Obtener eventos desde fecha de hoy\n   */\n  getEventos(checkDepto: string) {\n    // console.log(this.initEvents);\n    this.depto = localStorage.getItem(\"deptoActivo\");\n    this.distance = parseInt(localStorage.getItem(\"distanceActivo\"));\n    this.allEvents = [];\n    this.distanceEvents = [];\n\n    let currentDate = new Date();\n\n    this.controlDistance = false;\n\n    let searchDepto: boolean = false;\n\n    const options:Units = \"kilometers\";\n\n    if (this.depto != null) {\n      this.save_depto.forEach((search) => {\n        if (search == this.depto) {\n          searchDepto = true;\n        }\n      });\n    }\n\n    if (this.depto != null && !searchDepto) {\n      this.afs\n        .collection(\"eventos\")\n        .ref.where(\"departamento\", \"==\", this.selectionDepto)\n        .where(\"fechaFin\", \">=\", this.today)\n        .where(\"publicado\", \"==\", true)\n        .orderBy(\"fechaFin\", \"asc\")\n        .get()\n        .then((querySnapshot) => {\n          const mapEvents = new Map();\n          querySnapshot.forEach((item) => {\n            const data: any = item.data();\n            data.fechaInicio = new Date(data.fechaInicio[\"seconds\"] * 1000);\n            data.fechaFin = new Date(data.fechaFin[\"seconds\"] * 1000);\n\n            let evento = { id: item.id, ...data };\n            mapEvents.set(evento.id, { ...data });\n\n            let test = this.initEvents.find(function (element) {\n              return element.id === evento.id;\n            });\n\n            if (test === undefined) {\n              this.initEvents.push(evento);\n            }\n          });\n\n          this.allEvents = [...mapEvents.values()];\n\n          if (\n            this.geolocationSvc.posicion !== undefined &&\n            this.geolocationSvc.posicion !== null\n          ) {\n            this.allEvents.forEach((dist) => {\n              let calcDist = distance(\n                [\n                  this.geolocationSvc.posicion.longitud,\n                  this.geolocationSvc.posicion.latitud,\n                ],\n                [dist.ubicacion.lng, dist.ubicacion.lat],\n                { units: options}\n              );\n              dist.distancia = calcDist;\n              dist.distanciaNumber = calcDist;\n            });\n          }\n\n          if (querySnapshot.size !== 0) {\n            this.save_depto.push(this.depto);\n            this.noData = false;\n          } else this.noData = true;\n\n          searchDepto = false;\n\n          this.allEvents.sort((a, b) => {\n            if (a.fechaInicio < b.fechaInicio) {\n              return -1;\n            }\n\n            if (a.fechaInicio > b.fechaInicio) {\n              return 1;\n            }\n\n            return 0;\n          });\n\n          this.eventos.next(this.allEvents);\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n        .finally(() => \"Finally\");\n    } else if (this.depto != null && searchDepto) {\n      this.initEvents.sort((a, b) => {\n        if (a.fechaInicio < b.fechaInicio) {\n          return -1;\n        }\n\n        if (a.fechaInicio > b.fechaInicio) {\n          return 1;\n        }\n\n        return 0;\n      });\n      this.initEvents.forEach((res) => {\n        if (res.departamento == this.depto && res.fechaFin >= currentDate) {\n          this.allEvents.push(res);\n        }\n      });\n\n      if (\n        this.geolocationSvc.posicion !== undefined &&\n        this.geolocationSvc.posicion !== null\n      ) {\n        this.allEvents.forEach((dist) => {\n          let calcDist = distance(\n            [\n              this.geolocationSvc.posicion.longitud,\n              this.geolocationSvc.posicion.latitud,\n            ],\n            [dist.ubicacion.lng, dist.ubicacion.lat],\n            { units: options}\n          );\n          dist.distancia = calcDist;\n          dist.distanciaNumber = calcDist;\n        });\n      }\n\n      this.allEvents.length !== 0 ? (this.noData = false) : this.noData;\n\n      this.eventos.next(this.allEvents);\n    } else if (this.distance != null) {\n      let deptoSearch: boolean = false;\n      let limitCurrent: string[] = [];\n\n      this.deptoLimit.forEach((res) => {\n        if (res.nameDepto == checkDepto) {\n          res.limit.forEach((dep: string) => {\n            limitCurrent.push(dep);\n          });\n        }\n      });\n\n      limitCurrent.forEach((dep: string) => {\n        if (this.save_depto.length != 0) {\n          this.save_depto.forEach((search) => {\n            if (dep == search) {\n              deptoSearch = true;\n            }\n          });\n        }\n\n        if (deptoSearch) {\n          this.initEvents.forEach((init: any) => {\n            if (init.departamento == dep && init.fechaFin >= currentDate) this.distanceEvents.push(init);\n          });\n\n          if (\n            this.geolocationSvc.posicion !== undefined &&\n            this.geolocationSvc.posicion !== null\n          ) {\n            this.distanceEvents.forEach((dist) => {\n              let calcDist = distance(\n                [\n                  this.geolocationSvc.posicion.longitud,\n                  this.geolocationSvc.posicion.latitud,\n                ],\n                [dist.ubicacion.lng, dist.ubicacion.lat],\n                { units: options}\n              );\n              dist.distancia = calcDist;\n              dist.distanciaNumber = calcDist;\n\n              if (calcDist <= this.distance) {\n                this.controlDistance = true;\n              }\n            });\n          }\n\n          deptoSearch = false;\n        } else {\n          this.afs\n            .collection(\"eventos\")\n            .ref.where(\"departamento\", \"==\", dep)\n            .where(\"fechaFin\", \">=\", this.today)\n            .where(\"publicado\", \"==\", true)\n            .orderBy(\"fechaFin\", \"asc\")\n            .get()\n            .then((querySnapshot) => {\n              querySnapshot.forEach((item) => {\n                const data: any = item.data();\n                data.fechaInicio = new Date(data.fechaInicio[\"seconds\"] * 1000);\n                data.fechaFin = new Date(data.fechaFin[\"seconds\"] * 1000);\n\n                let evento = { id: item.id, ...data };\n\n                let test = this.initEvents.find(function (element) {\n                  return element.id === evento.id;\n                });\n\n                if (test === undefined) {\n                  this.initEvents.push(evento);\n                  this.distanceEvents.push(evento);\n                }\n              });\n\n              if (\n                this.geolocationSvc.posicion !== undefined &&\n                this.geolocationSvc.posicion !== null\n              ) {\n                this.distanceEvents.forEach((dist) => {\n                  let calcDist = distance(\n                    [\n                      this.geolocationSvc.posicion.longitud,\n                      this.geolocationSvc.posicion.latitud,\n                    ],\n                    [dist.ubicacion.lng, dist.ubicacion.lat],\n                    { units: options}\n                  );\n                  dist.distancia = calcDist;\n                  dist.distanciaNumber = calcDist;\n\n                  if (calcDist <= this.distance) {\n                    this.controlDistance = true;\n                  }\n                });\n              }\n\n              if (!searchDepto && querySnapshot.size !== 0)\n                this.save_depto.push(dep);\n            })\n            .catch((err) => {\n              console.log(err);\n            })\n            .finally(() => \"Fin\");\n          deptoSearch = false;\n        }\n      });\n      this.distanceEvents.length !== 0 ? (this.noData = false) : this.noData;\n\n      this.distanceEvents.sort((a, b) => {\n        if (a.fechaInicio < b.fechaInicio) {\n          return -1;\n        }\n\n        if (a.fechaInicio > b.fechaInicio) {\n          return 1;\n        }\n\n        return 0;\n      });\n\n      this.eventos.next(this.distanceEvents);\n    }\n\n    return this.eventos;\n  }\n\n  allDepartament: Departament[] = [];\n  departamentosActivos: BehaviorSubject<Departament[]>;\n  deptoFound: boolean = false;\n  /**\n   * Obtener departamentos activos\n   */\n  getDepartamentosActivos() {\n    this.departamentosActivos = new BehaviorSubject<Departament[]>(\n      this.allDepartament\n    );\n\n    if (this.deptoFound === false) {\n      this.afs\n        .collection(\"departamentos\")\n        .ref.where(\"status\", \"==\", true)\n        .get()\n        .then((querySnapshot) => {\n          const arrDeptos: any[] = [];\n          querySnapshot.forEach((item) => {\n            const data: any = item.data();\n            arrDeptos.push({ id: item.id, ...data });\n          });\n          this.allDepartament = JSON.parse(JSON.stringify(arrDeptos));\n          this.departamentosActivos.next(this.allDepartament);\n\n          this.deptoFound = true;\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n        .finally(() => \"Finally\");\n    } else {\n      this.departamentosActivos.next(this.allDepartament);\n    }\n  }\n\n  getDominga() {\n    this.dominga = [];\n\n    this.afs\n      .collection(\"dominga\")\n      .ref.get()\n      .then((querySnapshot) => {\n        const arrDominga: any[] = [];\n        querySnapshot.forEach((item) => {\n          const data: any = item.data();\n          arrDominga.push({ id: item.id, ...data });\n        });\n        this.dominga = JSON.parse(JSON.stringify(arrDominga));\n        this.casaDominga.next(this.dominga);\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n      .finally(() => \"Finally\");\n\n    return this.casaDominga;\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}