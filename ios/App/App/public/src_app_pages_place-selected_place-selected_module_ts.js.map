{"version":3,"file":"src_app_pages_place-selected_place-selected_module_ts.js","mappings":"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","sources":["./src/app/pages/place-selected/place-selected-routing.module.ts","./src/app/pages/place-selected/place-selected.module.ts","./src/app/pages/place-selected/place-selected.page.ts","./src/app/pages/place-selected/place-selected.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PlaceSelectedPage } from './place-selected.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PlaceSelectedPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PlaceSelectedPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PlaceSelectedPageRoutingModule } from './place-selected-routing.module';\n\nimport { PlaceSelectedPage } from './place-selected.page';\nimport { VideoPageModule } from '../video/video.module';\nimport { PipesModule } from '../../shared/pipes/pipes.module';\nimport { MinimapaComponent } from '../../components/minimapa/minimapa.component';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PlaceSelectedPageRoutingModule,\n    VideoPageModule,\n    PipesModule,\n    ComponentsModule,\n  ],\n  declarations: [PlaceSelectedPage]\n})\nexport class PlaceSelectedPageModule {}\n","import { Component, OnInit, OnDestroy, ViewChild } from \"@angular/core\";\nimport { ActionSheetController, ModalController } from \"@ionic/angular\";\nimport { Subscription } from \"rxjs\";\nimport { PlaceService } from \"src/app/services/database/place.service\";\nimport { Place } from \"src/app/shared/place\";\nimport { VideoPage } from \"../video/video.page\";\nimport * as Mapboxgl from \"mapbox-gl\";\nimport { Router } from \"@angular/router\";\nimport { PreloadDetailsComponent } from \"../../components/preload-details/preload-details.component\";\n\ndeclare var $: any;\n\n@Component({\n  selector: \"app-place-selected\",\n  templateUrl: \"./place-selected.page.html\",\n  styleUrls: [\"./place-selected.page.scss\"],\n})\nexport class PlaceSelectedPage implements OnInit, OnDestroy {\n  @ViewChild(PreloadDetailsComponent, { static: true })\n  preloadDetails: PreloadDetailsComponent;\n\n  place: Place = null;\n  place_suscription: Subscription;\n  mapa: Mapboxgl.Map;\n  near: any[] = [];\n  near_places: Subscription;\n\n  param: string = \"\";\n\n  slideOpts = {\n    initialSlide: 0,\n    speed: 400,\n    slidesPerView: 3,\n    spaceBetween: 1,\n    autoplay: true,\n  };\n\n  videos: any[] = [];\n\n  /**url load  */\n  preloadImage: string = \"/assets/load_1.30.gif\";\n  /**clase preload */\n  preloadClass: string = \"img-principal\";\n  /**clase preload galeria*/\n  preloadClassGaleria: string = \"img-galeria\";\n  /**clase preload interes*/\n  preloadClassInteres: string = \"img-interes\";\n\n  constructor(\n    private placeSvc: PlaceService,\n    private modalCtrl: ModalController,\n    private router: Router,\n    private actionSheetController: ActionSheetController\n  ) {}\n\n  ngOnInit() {\n    this.place_suscription = this.placeSvc.place_selected.subscribe((res) => {\n      this.place = res;\n\n      if (this.place.videos.length > 0) {\n        this.videos = this.place.videos.filter(\n          (item: any) =>\n            item.url !== null &&\n            item.url !== undefined &&\n            item.url !== \"\" &&\n            item.url !== \" \"\n        );\n      }\n\n      this.placeSvc.getPlaceNear();\n\n      this.near_places = this.placeSvc.near_places.subscribe((res) => {\n        this.near = [];\n        this.near = res;\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    this.place_suscription.unsubscribe();\n    this.near_places.unsubscribe();\n  }\n\n  /**selecciona lugar actual */\n  getPlace(id: string) {\n    this.placeSvc.getPlaceId(id);\n  }\n\n  /**\n   * Al seleccionar una imagen de la mini galerÃ­a modifica la imagen principal\n   */\n  cambiarImagen(src: string) {\n    this.preloadDetails.url = src;\n  }\n\n  irHome() {\n    this.router.navigate([\"/tabs/place\"]);\n  }\n\n  /**\n   * Abre modal para reproducir video\n   * @param url - URL del video que se va a ejecutar\n   */\n  async verVideo(url: string) {\n    const video = await this.modalCtrl.create({\n      component: VideoPage,\n      cssClass: \"modal-video\",\n      backdropDismiss: false,\n      showBackdrop: true,\n      componentProps: {\n        url: url,\n      },\n      mode: 'ios',\n    });\n\n    await video.present();\n  }\n\n  /**\n   * Al seleccionar sobre el mapa de cada lugar, se desplega un action-sheet\n   * que brinda opciones de como llegar al mismo ya se en auto, bicicleta o caminando\n   */\n  async abrirMapaActionSheet() {\n    const actionSheet = await this.actionSheetController.create({\n      header: \"Abrir Mapa\",\n      cssClass: \"my-custom-class\",\n      buttons: [\n        {\n          text: \"Ir en auto\",\n          icon: \"car-sport\",\n          handler: () => {\n            //Abre el mapa en modo auto\n            this.router.navigate([\n              \"/map\",\n              this.place.nombre,\n              {\n                longitud: this.place.ubicacion.lng,\n                latitud: this.place.ubicacion.lat,\n                tipo: this.place.tipo,\n                id: this.place.id,\n                profile: \"mapbox/driving-traffic\",\n              },\n            ]);\n          },\n        },\n        {\n          text: \"Ir caminando\",\n          icon: \"walk\",\n          handler: () => {\n            this.router.navigate([\n              \"/map\",\n              this.place.nombre,\n              {\n                longitud: this.place.ubicacion.lng,\n                latitud: this.place.ubicacion.lat,\n                tipo: this.place.tipo,\n                id: this.place.id,\n                profile: \"mapbox/walking\",\n              },\n            ]);\n            console.log(\"Ir caminando\");\n          },\n        },\n        {\n          text: \"Ir en bicicleta\",\n          icon: \"bicycle-outline\",\n          handler: () => {\n            this.router.navigate([\n              \"/map\",\n              this.place.nombre,\n              {\n                longitud: this.place.ubicacion.lng,\n                latitud: this.place.ubicacion.lat,\n                tipo: this.place.tipo,\n                id: this.place.id,\n                profile: \"mapbox/driving\",\n              },\n            ]);\n            console.log(\"Ir en Bicicleta\");\n          },\n        },\n        {\n          text: \"Cancelar\",\n          icon: \"close\",\n          role: \"cancel\",\n          handler: () => {\n            console.log(\"Cancel clicked\");\n          },\n        },\n      ],\n    });\n    await actionSheet.present();\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar color=\\\"information\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button\\n        (click)=\\\"irHome()\\\"\\n        color=\\\"back\\\"\\n        text=\\\"\\\"\\n      ></ion-back-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"back\\\" id=\\\"nombre\\\">{{place.nombre}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <ion-fab\\n    *ngIf=\\\"videos.length > 0\\\"\\n    vertical=\\\"top\\\"\\n    horizontal=\\\"start\\\"\\n    slot=\\\"fixed\\\"\\n  >\\n    <ion-fab-button color=\\\"danger\\\">\\n      <ion-icon name=\\\"logo-youtube\\\"></ion-icon>\\n    </ion-fab-button>\\n    <ion-fab-list side=\\\"bottom\\\" class=\\\"lista_videos\\\">\\n      <ion-fab-button class=\\\"btn_video\\\" *ngFor=\\\"let video of videos\\\">\\n        <ion-icon\\n          (click)=\\\"verVideo(video.url)\\\"\\n          name=\\\"videocam-outline\\\"\\n          style=\\\"font-size: 180%\\\"\\n        ></ion-icon>\\n      </ion-fab-button>\\n    </ion-fab-list>\\n  </ion-fab>\\n  <div class=\\\"padre\\\" id=\\\"place-container\\\">\\n    <div class=\\\"diva\\\">\\n      <app-preload-details\\n        #foto\\n        [url]=\\\"place.imagenPrincipal.url\\\"\\n        [alt]=\\\"place.nombre\\\"\\n        [urlPreload]=\\\"preloadImage\\\"\\n        [clase]=\\\"preloadClass\\\"\\n      ></app-preload-details>\\n    </div>\\n    <div class=\\\"divb\\\">\\n      <ion-slides class=\\\"slidePadre\\\" pager=\\\"false\\\" [options]=\\\"slideOpts\\\">\\n        <ion-slide class=\\\"slideHijo\\\" *ngFor=\\\"let img of place.imagenes\\\">\\n          <div>\\n            <app-preload-details\\n              #foto\\n              (click)=\\\"cambiarImagen(img.url)\\\"\\n              [url]=\\\"img.url\\\"\\n              [alt]=\\\"img.url\\\"\\n              [urlPreload]=\\\"preloadImage\\\"\\n              [clase]=\\\"preloadClassGaleria\\\"\\n            ></app-preload-details>\\n          </div>\\n        </ion-slide>\\n      </ion-slides>\\n    </div>\\n    <div class=\\\"divc\\\">\\n      <div class=\\\"iconos\\\">\\n        <div class=\\\"iconAuto\\\" *ngIf=\\\"place.auto == true\\\">\\n          <ion-icon name=\\\"car-sport-outline\\\"></ion-icon>\\n        </div>\\n        <div class=\\\"iconEstilos\\\" *ngIf=\\\"place.bicicleta == true\\\">\\n          <ion-icon name=\\\"bicycle-outline\\\"></ion-icon>\\n        </div>\\n        <div class=\\\"iconEstilos\\\" *ngIf=\\\"place.caminar == true\\\">\\n          <ion-icon name=\\\"walk-outline\\\"></ion-icon>\\n        </div>\\n        <!-- <div id=\\\"dist\\\">\\n                  <div>{{ distancia | formatDistancia }}</div>                 \\n              </div> -->\\n      </div>\\n      <p\\n        class=\\\"text\\\"\\n        id=\\\"place-description\\\"\\n        [routerLink]=\\\"['/descripcion', place.id]\\\"\\n        [innerHTML]=\\\"place.descripcionCorta\\\"\\n      ></p>\\n    </div>\\n    <div class=\\\"divd\\\">\\n      <app-minimapa [lugarActual]=\\\"place\\\"></app-minimapa>\\n    </div>\\n    <h6 class=\\\"interes\\\">Te puede interesar</h6>\\n    <div class=\\\"divf\\\">\\n      <a\\n        class=\\\"sugerencia\\\"\\n        (click)=\\\"getPlace(sug.id)\\\"\\n        *ngFor=\\\"let sug of near\\\"\\n        [routerLink]=\\\"['/place-selected',sug.id]\\\"\\n      >\\n        <div class=\\\"sug\\\">\\n          <app-preload-details\\n            [url]=\\\"sug.image.url\\\"\\n            [alt]=\\\"sug.image.url\\\"\\n            [urlPreload]=\\\"preloadImage\\\"\\n            [clase]=\\\"preloadClassInteres\\\"\\n          ></app-preload-details>\\n        </div>\\n        <div class=\\\"infoSug\\\">\\n          <div class=\\\"sugNombre\\\">{{ sug.name }}</div>\\n          <div class=\\\"sugDistancia\\\">\\n            {{ sug.distance | formatDistancia }} desde {{ place.nombre }}\\n          </div>\\n        </div>\\n      </a>\\n    </div>\\n  </div>\\n</ion-content>\\n\";"],"names":[],"sourceRoot":"webpack:///"}